package com.saltlux.khnp.searcher;

import com.google.gson.Gson;
import com.knu.lea.api.util.Tag.Analysis;
import com.knu.lea.api.util.Tag.Morph;
import com.knu.lea.api.util.Tag.Sentence;
import com.saltlux.khnp.searcher.deepqa.model.DeepQAResult;
import com.saltlux.tms.analysis.TextAnalyzer;
import com.saltlux.tms.util.IN2TMSProperties;
import com.saltlux.tms3.util.TYPE;
import org.apache.commons.lang3.StringUtils;
import org.jsoup.Jsoup;
import org.jsoup.nodes.*;
import org.springframework.http.ResponseEntity;
import org.springframework.web.client.RestTemplate;

import javax.net.ssl.*;
import java.security.KeyManagementException;
import java.security.NoSuchAlgorithmException;
import java.security.cert.X509Certificate;
import java.util.HashMap;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.stream.Collectors;

public class MrcParseTest {

    static TextAnalyzer tms;

    public static void main(String[] args) throws Exception {
        System.setProperty("IN2_HOME", "D:\\solution\\[IN2] Discovery 3.0");
        IN2TMSProperties prop = IN2TMSProperties.getInstance();
        tms = TextAnalyzer.loadServer(prop);

        String html = "<p class=\"HStyle5\"><span style=\"\">3.1.7&nbsp; 조절제어봉집합체 삽입한계</span></p>\n\n<p class=\"HStyle5\"><span style=\"\"><br></span></p>\n\n<div class=\"hilight-3431\"><p class=\"HStyle18\"><span style=\"\">운전제한조건 3.1.7</span><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>출력의존 삽입한계(PDIL : Power Dependent Insertion Limit) 경보회로는 <span style=\"\">운전가능</span>해야 한다.&nbsp; 그리고</p>\n</div>\n<p class=\"HStyle11\"><br></p>\n\n<p class=\"HStyle11\"><span style=\"\">1.</span><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;</span>노심운전제한치감시계통(COLSS : Core Operating Limit Supervisory System)이 운전중인 경우, 조절제어봉집합체 그룹들은 <span style=\"\"><a href=\"javascript:void(0);\" onclick=\"openCall('그림 3.1.7-1')\">그림 3.1.7-1</a></span>에 기술된 인출순서, 삽입한계 및 관련 시간제한에 따라 제한되어야 한다.</p>\n\n<p class=\"HStyle11\"><br></p>\n\n<p class=\"HStyle11\"><span style=\"\">2.</span><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;</span>노심운전제한치감시계통이 운전불능인 경우, 조절제어봉집합체 그룹들은 <span style=\"\"><a href=\"javascript:void(0);\" onclick=\"openCall('그림 3.1.7-2')\">그림 3.1.7-2</a></span>에 기술된 인출순서, 삽입한계 및 관련 시간제한에 따라 제한되어야 한다.</p>\n\n<p class=\"HStyle18\"><br></p>\n\n<p class=\"HStyle18\"><br></p>\n\n<p class=\"HStyle16\"><span style=\"\">적용 <span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>운전모드 1, 2</span><span style=\"\"><sup>*</sup></span></p>\n\n<p class=\"HStyle14\">* k<sub>eff</sub>≥1.0</p>\n\n<p class=\"HStyle14\"><br></p>\n\n<p class=\"HStyle14\"><br></p>\n\n<p class=\"HStyle14\">-------------------------<span style=\"\">주</span>------------------------</p>\n\n<p class=\"HStyle14\">이 <span style=\"\">운전제한조건</span>은 <span style=\"\"><a href=\"javascript:void(0);\" onclick=\"openCall('점검요구사항 3.1.5.3')\">점검요구사항 3.1.5.3</a></span>(또는 원자로출력 급감발 작동 중)을 수행하는 동안에는 적용되지 않는다.</p>\n\n<p class=\"HStyle14\">---------------------------------------------------</p>\n\n<p class=\"HStyle14\"><br></p>\n\n<p class=\"HStyle5\"><span style=\"\">불만족시 조치 </span></p>\n\n<p class=\"HStyle5\">\n</p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse;border:none;\">\n<tbody><tr>\n\t<td width=\"168\" height=\"26\" valign=\"middle\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:double #000000 1.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">불만족상태</span></p>\n\t</td>\n\t<td width=\"324\" height=\"26\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:double #000000 1.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">조치요구사항</span></p>\n\t</td>\n\t<td width=\"111\" height=\"26\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:double #000000 1.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">제한시간</span></p>\n\t</td>\n</tr>\n<tr>\n\t<td width=\"168\" height=\"173\" valign=\"top\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:24.1pt;margin-right:5.0pt;text-indent:-24.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:19.1pt;margin-right:5.0pt;text-indent:-19.1pt;\"><span style=\"\">1.</span><span style=\"HWP-TAB:1;\">&nbsp;</span>노심운전제한치감시계통 운전 중 조절제어봉그룹들이 과도상태 삽입한계를 초과하여 삽입되었을 때</p>\n\t<p class=\"HStyle0\" style=\"margin-left:24.1pt;margin-right:5.0pt;text-indent:-24.1pt;\">&nbsp;</p>\n\t</td>\n\t<td width=\"324\" height=\"173\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">1.1.1</span><span style=\"HWP-TAB:1;\">&nbsp;</span><span style=\"\">정지여유도</span>가 <span style=\"\">5.5%Δk/k 이상</span>인지 확인한다.</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=\"\">그리고</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t</td>\n\t<td width=\"111\" height=\"173\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle21\" style=\"margin-left:4.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;\">1시간</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle10\">(계속)</p>\n\t</td>\n</tr>\n</tbody></table>\n<table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse;border:none;\">\n<tbody><tr>\n\t<td width=\"27\" height=\"18\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:none;border-bottom:none;padding:1.4pt 5.1pt 1.4pt 5.1pt\">\n\t<p class=\"HStyle0\">1</p>\n\t</td>\n</tr>\n</tbody></table><p></p>\n\n<p class=\"HStyle5\"><span style=\"\">불만족시 조치</span></p>\n\n<p class=\"HStyle5\">\n</p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse;border:none;\">\n<tbody><tr>\n\t<td width=\"168\" height=\"26\" valign=\"middle\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">불만족상태</span></p>\n\t</td>\n\t<td width=\"324\" height=\"26\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">조치요구사항</span></p>\n\t</td>\n\t<td width=\"111\" height=\"26\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">제한시간</span></p>\n\t</td>\n</tr>\n<tr>\n\t<td width=\"168\" height=\"327\" valign=\"top\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:24.1pt;margin-right:5.0pt;text-indent:-24.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:19.1pt;margin-right:5.0pt;text-indent:-19.1pt;\"><span style=\"\">1.</span><span style=\"HWP-TAB:1;\">&nbsp;</span>(계속)</p>\n\t<p class=\"HStyle0\" style=\"margin-left:19.1pt;margin-right:5.0pt;text-indent:-19.1pt;\">&nbsp;</p>\n\t</td>\n\t<td width=\"324\" height=\"327\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">1.1.2</span><span style=\"HWP-TAB:1;\">&nbsp;</span><span style=\"\">정지여유도</span>가 제한치보다 작은 경우 <span style=\"\">정지여유도</span>를 제한치 이내로 복구하기 위해 붕소주입을 시작한다.</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">그리고</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\"><span style=\"\">&nbsp;</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">1.2.1</span><span style=\"HWP-TAB:1;\">&nbsp;</span>조절제어봉그룹들을 제한치 이내로 복구한다.</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=\"\">또는</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">1.2.2</span><span style=\"HWP-TAB:1;\">&nbsp;</span><span style=\"\">열출력</span>을 <span style=\"letter-spacing:0.4pt;\"><a href=\"javascript:void(0);\" onclick=\"openCall('그림 3.1.7-1')\">그림 3.1.7-1</a></span><span style=\"letter-spacing:0.4pt;\">에</span> 기술된 제어봉그룹 위치와 삽입한계에 의해 허용되는 <span style=\"\">정격열출력</span> <span style=\"\">이하</span>로 감소시킨다.</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t</td>\n\t<td width=\"111\" height=\"327\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">즉시</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">2시간</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">2시간</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t</td>\n</tr>\n<tr>\n\t<td width=\"168\" height=\"239\" valign=\"top\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:24.1pt;margin-right:5.0pt;text-indent:-24.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:19.1pt;margin-right:5.0pt;text-indent:-19.1pt;\"><span style=\"\">2.</span><span style=\"HWP-TAB:1;\">&nbsp;</span>노심운전제한치감시계통 운전 중 조절제어봉그룹들이&nbsp; 장기 안정상태 삽입한계와 과도상태 삽입한계 사이에서 24시간 동안 4시간을 초과하여 삽입되었을 때</p>\n\t<p class=\"HStyle0\" style=\"margin-left:24.1pt;margin-right:5.0pt;text-indent:-24.1pt;\">&nbsp;</p>\n\t</td>\n\t<td width=\"324\" height=\"239\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">2.1</span><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;</span>단기 안정상태 삽입한계치를 초과하지 않았는지 확인한다.</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">또는</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\"><span style=\"\">&nbsp;</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">2.2</span><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;</span><span style=\"\">열출력</span> 증가율을 시간당 <span style=\"\">정격열출력</span>의<span style=\"\"> 5% 이하</span>로 제한한다.</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t</td>\n\t<td width=\"111\" height=\"239\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">15분</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">15분</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:3.5pt;\">&nbsp;</p>\n\t</td>\n</tr>\n</tbody></table>\n<table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse;border:none;\">\n<tbody><tr>\n\t<td width=\"27\" height=\"64\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:none;border-bottom:none;padding:1.4pt 5.1pt 1.4pt 5.1pt\">\n\t<p class=\"HStyle0\">1</p>\n\t</td>\n</tr>\n</tbody></table><p></p>\n\n<p class=\"HStyle0\" style=\"text-align:right;\">(계속)</p>\n\n<p class=\"HStyle0\" style=\"text-align:right;\"><br></p>\n\n<p class=\"HStyle5\"><span style=\"\">불만족시 조치</span> (계속)</p>\n\n<p class=\"HStyle0\">\n</p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse;border:none;\">\n<tbody><tr>\n\t<td width=\"168\" height=\"26\" valign=\"middle\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">불만족상태</span></p>\n\t</td>\n\t<td width=\"324\" height=\"26\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">조치요구사항</span></p>\n\t</td>\n\t<td width=\"111\" height=\"26\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">제한시간</span></p>\n\t</td>\n</tr>\n<tr>\n\t<td width=\"168\" height=\"283\" valign=\"top\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:24.1pt;margin-right:5.0pt;text-indent:-24.1pt;\"><span style=\"\">&nbsp;</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:19.1pt;margin-right:5.0pt;text-indent:-19.1pt;\"><span style=\"\">3.</span><span style=\"HWP-TAB:1;\">&nbsp;</span><span style=\"letter-spacing:0.2pt;\">노심운전제한치감시계통 운전 중 조절제어봉그룹들이 장기 안정상태 삽입한계와 과도상태 삽입한계 사이에서 30 EFPD 동안 5 EFPD를 초과하거나, 365 EFPD 동안 14 EFPD를 초과하여 삽입되었을 때</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:24.1pt;margin-right:5.0pt;text-indent:-24.1pt;\">&nbsp;&nbsp;&nbsp;&nbsp;</p>\n\t</td>\n\t<td width=\"324\" height=\"283\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">3.1</span><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;</span>조절제어봉 그룹들을 장기 안정상태 삽입한계 이내로 복구한다.</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t</td>\n\t<td width=\"111\" height=\"283\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">2시간</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t</td>\n</tr>\n<tr>\n\t<td width=\"168\" height=\"459\" valign=\"top\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:19.1pt;margin-right:5.0pt;text-indent:-19.1pt;\"><span style=\"\">4.</span><span style=\"HWP-TAB:1;\">&nbsp;</span>노심운전제한치감시계통 운전불능 중 조절제어봉그룹들이 단기 안정상태 삽입한계를 초과하여 삽입되었을 때</p>\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t</td>\n\t<td width=\"324\" height=\"459\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">4.1.1</span><span style=\"HWP-TAB:1;\">&nbsp;</span><span style=\"\">정지여유도</span>가 <span style=\"\">5.5%Δk/k 이상</span>인지 확인한다.</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=\"\">그리고</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">4.1.2</span><span style=\"HWP-TAB:1;\">&nbsp;</span><span style=\"\">정지여유도</span>가 제한치보다 작은 경우 <span style=\"\">정지여유도</span>를 제한치 이내로 복구하기 위해 붕소주입을 시작한다.</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">그리고</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\"><span style=\"\">&nbsp;</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">4.2.1</span><span style=\"HWP-TAB:1;\">&nbsp;</span>조절제어봉그룹들을 제한치 이내로 복구한다.</p>\n\t<p class=\"HStyle0\" style=\"margin-left:41.9pt;margin-right:5.0pt;text-indent:-36.9pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=\"\">또는</span></p>\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">4.2.2</span><span style=\"HWP-TAB:1;\">&nbsp;</span><span style=\"\">열출력</span>을 <span style=\"letter-spacing:0.4pt;\"><a href=\"javascript:void(0);\" onclick=\"openCall('그림 3.1.7-2')\">그림 3.1.7-2</a></span>에 기술된 제어봉그룹 위치와 단기 안정상태 삽입한계에 의해 허용되는 <span style=\"\">정격열출력</span> <span style=\"\">이하</span>로 감소시킨다.</p>\n\t</td>\n\t<td width=\"111\" height=\"459\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">1시간</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">즉시</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">2시간</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">2시간</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;text-indent:0.1pt;\">&nbsp;</p>\n\t</td>\n</tr>\n</tbody></table>\n<table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse;border:none;\">\n<tbody><tr>\n\t<td width=\"27\" height=\"113\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:none;border-bottom:none;padding:1.4pt 5.1pt 1.4pt 5.1pt\">\n\t<p class=\"HStyle0\">1</p>\n\t</td>\n</tr>\n</tbody></table>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(계속)<p></p>\n\n<p class=\"HStyle5\"><span style=\"\">불만족시 조치</span> (계속)</p>\n\n<p class=\"HStyle0\">\n</p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse;border:none;\">\n<tbody><tr>\n\t<td width=\"168\" height=\"26\" valign=\"middle\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">불만족상태</span></p>\n\t</td>\n\t<td width=\"324\" height=\"26\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">조치요구사항</span></p>\n\t</td>\n\t<td width=\"111\" height=\"26\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">제한시간</span></p>\n\t</td>\n</tr>\n<tr>\n\t<td width=\"168\" height=\"173\" valign=\"top\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:19.1pt;margin-right:5.0pt;text-indent:-19.1pt;\"><span style=\"\">5.</span><span style=\"HWP-TAB:1;\">&nbsp;</span>출력의존 삽입한계경보회로가 운전불가능할 때</p>\n\t<p class=\"HStyle0\" style=\"margin-left:19.1pt;margin-right:5.0pt;text-indent:-19.1pt;\">&nbsp;</p>\n\t</td>\n\t<td width=\"324\" height=\"173\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">5.1</span><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;</span><span style=\"\"><a href=\"javascript:void(0);\" onclick=\"openCall('점검요구사항 3.1.7.1')\">점검요구사항 3.1.7.1</a></span>을 수행한다.</p>\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t</td>\n\t<td width=\"111\" height=\"173\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:5.0pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.9pt;\">1시간</p>\n\t<p class=\"HStyle0\" style=\"margin-left:5.0pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:5.0pt;\"><span style=\"\">그리고</span></p>\n\t<p class=\"HStyle0\" style=\"margin-left:5.0pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:5.0pt;margin-right:3.7pt;\">그 이후 4시간에 1회씩 </p>\n\t<p class=\"HStyle0\" style=\"margin-left:5.0pt;\">&nbsp;</p>\n\t</td>\n</tr>\n<tr>\n\t<td width=\"168\" height=\"107\" valign=\"top\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:double #000000 1.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:19.1pt;margin-right:5.0pt;text-indent:-19.1pt;\"><span style=\"\">6.</span><span style=\"HWP-TAB:1;\">&nbsp;</span><span style=\"\">조치요구사항</span>과 <span style=\"\">제한시간</span>을 불만족할 때</p>\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t</td>\n\t<td width=\"324\" height=\"107\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:double #000000 1.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:40.0pt;margin-right:5.0pt;text-indent:-35.0pt;\"><span style=\"\">6.1</span><span style=\"HWP-TAB:1;\">&nbsp;&nbsp;&nbsp;</span><span style=\"\">운전모드 3</span>으로 간다.</p>\n\t</td>\n\t<td width=\"111\" height=\"107\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:double #000000 1.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"text-align:center;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:5.0pt;\">6시간</p>\n\t<p class=\"HStyle0\" style=\"text-align:center;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"text-align:center;\">&nbsp;</p>\n\t</td>\n</tr>\n</tbody></table><p></p>\n\n<p class=\"HStyle0\"><br></p>\n\n<p class=\"HStyle0\"><br></p>\n\n<p class=\"HStyle5\"><span style=\"\">점검요구사항</span></p>\n\n<p class=\"HStyle0\">\n</p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse;border:none;\">\n<tbody><tr>\n\t<td colspan=\"2\" width=\"496\" height=\"26\" valign=\"middle\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:double #000000 1.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">점 검 내 용</span></p>\n\t</td>\n\t<td width=\"108\" height=\"26\" valign=\"middle\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:double #000000 1.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle15\"><span style=\"\">점검주기</span></p>\n\t</td>\n</tr>\n<tr>\n\t<td width=\"168\" height=\"173\" valign=\"top\" style=\"border-left:none;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\"><span style=\"\">&nbsp;</span></p>\n<div class=\"hilight-3760\">\t<p class=\"HStyle0\"><span style=\"\">점검요구사항 3.1.7.1 </span></p>\n</div>\t<p class=\"HStyle0\"><span style=\"\">&nbsp;</span></p>\n\t</td>\n\t<td width=\"327\" height=\"173\" valign=\"top\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-right:5.0pt;\">&nbsp;</p>\n\t<p class=\"HStyle22\" style=\"margin-right:0.0pt;\"><span style=\"letter-spacing:0.1pt;\">-----------------</span><span style=\"letter-spacing:0.1pt;\">주</span><span style=\"letter-spacing:0.1pt;\">--------------------</span></p>\n\t<p class=\"HStyle0\" style=\"margin-right:5.0pt;\">이 <span style=\"\">점검내용</span>은 <span style=\"\">운전모드 2</span>로 진입하기 전에는 수행이 요구되지 않는다.</p>\n\t<p class=\"HStyle22\" style=\"margin-right:0.0pt;\"><span style=\"letter-spacing:0.2pt;\">---------------------------------------</span></p>\n\t<p class=\"HStyle0\" style=\"margin-right:5.0pt;\">각 조절제어봉그룹 위치가 삽입한계 이내에 있는지 확인한다.</p>\n\t<p class=\"HStyle0\" style=\"margin-right:5.0pt;\">&nbsp;</p>\n\t</td>\n\t<td width=\"108\" height=\"173\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:4.6pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.6pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.6pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.6pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.6pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.6pt;\">12시간</p>\n\t</td>\n</tr>\n<tr>\n\t<td width=\"168\" height=\"107\" valign=\"top\" style=\"border-left:none;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\"><span style=\"\">&nbsp;</span></p>\n<div class=\"hilight-3783\">\t<p class=\"HStyle0\"><span style=\"\">점검요구사항 3.1.7.2</span></p>\n</div>\t<p class=\"HStyle0\"><span style=\"\">&nbsp;</span></p>\n\t</td>\n\t<td width=\"327\" height=\"107\" valign=\"top\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t<p class=\"HStyle0\">조절제어봉 그룹들이 장기안정상태 삽입한계를 초과하여 삽입되었으나, 과도상태 삽입한계 이내에 있었던 누적시간을 확인한다.</p>\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t</td>\n\t<td width=\"108\" height=\"107\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:solid #000000 0.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:4.6pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.6pt;\">24시간</p>\n\t</td>\n</tr>\n<tr>\n\t<td width=\"168\" height=\"84\" valign=\"top\" style=\"border-left:none;border-right:none;border-top:solid #000000 0.4pt;border-bottom:double #000000 1.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\"><span style=\"\">&nbsp;</span></p>\n<div class=\"hilight-3799\">\t<p class=\"HStyle0\"><span style=\"\">점검요구사항 3.1.7.3 </span></p>\n</div>\t<p class=\"HStyle0\"><span style=\"\">&nbsp;</span></p>\n\t</td>\n\t<td width=\"327\" height=\"84\" valign=\"top\" style=\"border-left:none;border-right:solid #000000 0.4pt;border-top:solid #000000 0.4pt;border-bottom:double #000000 1.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-right:5.0pt;\">출력의존 삽입한계 경보회로가 <span style=\"\">운전가능</span>한지 확인한다.</p>\n\t<p class=\"HStyle0\">&nbsp;</p>\n\t</td>\n\t<td width=\"108\" height=\"84\" valign=\"top\" style=\"border-left:solid #000000 0.4pt;border-right:none;border-top:solid #000000 0.4pt;border-bottom:double #000000 1.4pt;padding:1.4pt 1.4pt 1.4pt 1.4pt\">\n\t<p class=\"HStyle0\" style=\"margin-left:4.6pt;\">&nbsp;</p>\n\t<p class=\"HStyle0\" style=\"margin-left:4.6pt;\">31일</p>\n\t</td>\n</tr>\n</tbody></table><p></p>\n\n<div class=\"hilight-3814\"><p class=\"HStyle0\"><img src=\"/resources/97478166a232405696dc8c0c28f1122e/PIC8185.png\" width=\"537\" height=\"610\" vspace=\"0\" hspace=\"0\" border=\"0\"></p>\n</div>\n<p class=\"HStyle0\"><br></p>\n\n<p class=\"HStyle0\"><span style=\"\"><br></span></p>\n\n<p class=\"HStyle0\" style=\"text-align:center;\"><span style=\"\"><a href=\"javascript:void(0);\" onclick=\"openCall('그림 3.1.7-1')\">그림 3.1.7-1</a></span></p>\n\n<p class=\"HStyle15\"><span style=\"\">제어봉삽입한계 대 열출력(노심운전제한치감시계통 운전중)</span></p>\n\n<p class=\"HStyle0\"><br></p>\n\n<p class=\"HStyle0\"><br></p>\n\n<p class=\"HStyle0\" style=\"text-align:center;\"><span style=\"\"><br></span></p>\n\n<div class=\"hilight-3830\"><p class=\"HStyle0\" style=\"text-align:center;\"><span style=\"\"><img src=\"/resources/97478166a232405696dc8c0c28f1122e/PIC81C5.png\" width=\"464\" height=\"528\" vspace=\"0\" hspace=\"0\" border=\"0\">그림 3.1.7-2</span></p>\n</div>\n<p class=\"HStyle15\"><span style=\"\">제어봉삽입한계 대 열출력(노심운전제한치감시계통 운전불능시)</span></p>\n\n<p class=\"HStyle1\"><span style=\"font-size:12.0pt;line-height:150%;\">3.1&nbsp; 반응도제어계통</span></p>\n\n<p class=\"HStyle1\"></p>\n";
        Document doc = Jsoup.parse(html);
        DeepQAHtmlWrapper wrapper = new DeepQAHtmlWrapper(doc);
        System.out.println(wrapper);

        String question = getPOS("조절제어봉 집합체 삽입한계는?");
        String context = wrapper.morphTexts.entrySet().stream().map(e -> e.getValue()).collect(Collectors.joining());
        HashMap<String, String> parameters = new HashMap<>();
        parameters.put("question", question);
        parameters.put("context", context);

        disableSslVerification();
        String url = "https://192.168.219.2:8011/mrc";
//        ResponseEntity<String> res = new RestTemplate().postForEntity(url, parameters, String.class);
        ResponseEntity<DeepQAResult> res = new RestTemplate().postForEntity(url, parameters, DeepQAResult.class);
        System.out.println(res.getBody());
        System.out.println(res.getStatusCodeValue());

    }

    private static class DeepQAHtmlWrapper {
        Document document;


        AtomicInteger tokenKey;
        AtomicInteger sequenceLength;

        LinkedHashMap<Integer, String> texts;
        LinkedHashMap<Integer, String> morphTexts;
        LinkedHashMap<Integer, Integer> morphSequence;

        DeepQAHtmlWrapper(Document document){
            this.document = document;
            this.tokenKey = new AtomicInteger(0);
            this.sequenceLength = new AtomicInteger(0);
            this.texts = new LinkedHashMap();
            this.morphTexts = new LinkedHashMap();
            this.morphSequence = new LinkedHashMap();
            tokenize(document.body());
        }

        private void tokenize(Element element){
            texts.put(tokenKey.getAndIncrement(), tagPrefix(element));

            // never visit
            if(element.childNodeSize() == 0 && StringUtils.isNotBlank(element.text())){
                texts.put(tokenKey.getAndIncrement(), element.text());
                return;
            }

            for(Node n : element.childNodes()){
                if(n instanceof TextNode){
                    if(StringUtils.isNotBlank(n.outerHtml())) {
                        texts.put(tokenKey.getAndIncrement(), n.outerHtml());
                        String pos = getPOS(((TextNode) n).text());
                        if(StringUtils.isNotBlank(pos)){
                            morphTexts.put(tokenKey.get(), pos);
                            morphSequence.put(tokenKey.get(), sequenceLength.addAndGet(pos.length()));
                        }
                    }
                }else{
                    tokenize((Element)n);
                }
            }
            texts.put(tokenKey.getAndIncrement(), tagSuffix(element));
        }
    }

    public static String tagPrefix(Element e) {
        StringBuffer sb = new StringBuffer();
        sb.append("<").append(e.tagName());
        for(Attribute attr : e.attributes()){
            sb.append(String.format(" %s=\"%s\"", attr.getKey(), attr.getValue()));
        }
        sb.append(">");
        return sb.toString();
    }

    public static String tagSuffix(Element e) {
        return String.format("</%s>", e.tagName());
    }

    public static String getPOS(String text){
        long mode = TYPE.LANG_KOR | TYPE.TYPE_POS_STR;
        Map<Long, String> rs = tms.getRawStream(text, mode);
        if(rs.get(mode) == null){
            return text;
        }

        try{
            StringBuffer sb = new StringBuffer();
            Analysis analysis = new Gson().fromJson(rs.get(mode), Analysis.class);
            for(Sentence s : analysis.sentence){
                for(Morph m : s.morp){
                    if("-".equals(m.lemma) && "SS".equals(m.type))
                        continue;
                    sb.append(m.lemma).append("/").append(m.type).append(" ");
                }
            }
            return sb.toString().toLowerCase();
        }catch (Exception e){
            return text;
        }

    }

    // ssl security Exception 방지
    private static void disableSslVerification() {
        try
        {
            // Create a trust manager that does not validate certificate chains
            TrustManager[] trustAllCerts = new TrustManager[] {new X509TrustManager() {
                public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                    return null;
                }
                public void checkClientTrusted(X509Certificate[] certs, String authType) {
                }
                public void checkServerTrusted(X509Certificate[] certs, String authType) {
                }
            }
            };

            // Install the all-trusting trust manager
            SSLContext sc = SSLContext.getInstance("SSL");
            sc.init(null, trustAllCerts, new java.security.SecureRandom());
            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());

            // Create all-trusting host name verifier
            HostnameVerifier allHostsValid = new HostnameVerifier() {
                public boolean verify(String hostname, SSLSession session) {
                    return true;
                }
            };

            // Install the all-trusting host verifier
            HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        } catch (KeyManagementException e) {
            e.printStackTrace();
        }
    }
}
